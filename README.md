# ç®€ä»‹

## ç®€ä»‹

* [ç®€ä»‹](./#ç®€ä»‹)
* [1. changelog](./#1-changelog)
* [2. Dobotlink åŠŸèƒ½è¡¨](./#2-dobotlink-åŠŸèƒ½è¡¨)
  * [2.1. æ¨¡å—å¹³å°æ”¯æŒè¡¨](./#21-æ¨¡å—å¹³å°æ”¯æŒè¡¨)
  * [2.2. æ•™è‚²ç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨](./#22-æ•™è‚²ç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨)
  * [2.3. å·¥ä¸šç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨](./#23-å·¥ä¸šç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨)
* [3. æ¡†æ¶å›¾](./#3-æ¡†æ¶å›¾)
* [4. å·¥ä¸šæ’ä»¶ç±»å›¾](./#4-å·¥ä¸šæ’ä»¶ç±»å›¾)

## 1. changelog

## 2. Dobotlink åŠŸèƒ½è¡¨

* å·²æ”¯æŒ: âœ…
* å¼€å‘ä¸­: ğŸš§
* ä¸æ”¯æŒ: âŒ

### 2.1. æ¨¡å—å¹³å°æ”¯æŒè¡¨

| æ¨¡å— | Windows | MacOS | Linux | Android | iOS | Embed Linux\(Qt5.6\) | Chromebook | æ•™è‚²ç‰ˆæœ¬ | å·¥ä¸šç‰ˆæœ¬ |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| ä¸»æ¡†æ¶ | âœ… | âœ… | âœ… | ğŸš§ | âŒ | âœ… | ğŸš§ | âœ… | âœ… |
| MagicianPlugin\(å¼ƒç”¨\) | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| M1Plugin\(å¼ƒç”¨\) | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| MircobitPlugin\(å¼ƒç”¨\) | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| Protocol3.0Plugin\(å¼ƒç”¨\) | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| MagicDevicePlugin\(åŒ…å« P3\) | ğŸš§ | ğŸš§ | ğŸš§ | âŒ | âŒ | âŒ | ğŸš§ | âœ… | âŒ |
| ArdiunoPlugin | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| DownloadPlugin\(æœªä½¿ç”¨\) | ğŸš§ | ğŸš§ | ğŸš§ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| IndustrialPlugin | âœ… | âŒ | âŒ | ğŸš§ | âŒ | âŒ | âŒ | âŒ | âœ… |
| PythonDebuggerPlugin | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| LuaDebuggerPlugin | âœ… | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ | âœ… | âœ… |
| DynamicPlugin | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |
| AIPlugin | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |

### 2.2. æ•™è‚²ç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨

| ç‰ˆæœ¬ | æ§åˆ¶ Magic ç³»åˆ— | æ›´æ–° M | æ›´æ–° MB/ML | æ§åˆ¶ MG | æ›´æ–° MG | å›¾åƒåˆ†å‰²è¯†åˆ« | è„±æœº\(AIStarter\) | åœ¨çº¿/è„±æœº M | åœ¨çº¿ MB/ML | åœ¨çº¿ MG | èŠ‚ç‚¹ |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| Windows | âœ… | ğŸš§ | ğŸš§ | ğŸš§ | ğŸš§ | âœ… | âœ… | âœ… | âœ… | ğŸš§ | 2020 å¹´ 10 æœˆ |
| MacOS | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ | âŒ | æ—  |
| Chromebook | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ | âŒ | æ—  |

### 2.3. å·¥ä¸šç‰ˆå¼€å‘èŠ‚ç‚¹è¡¨

| ç‰ˆæœ¬ | æ§åˆ¶ M1 | åœ¨çº¿ M1 | M1 åŠ¨æ€ç®—æ³• | æ§åˆ¶å·¥ä¸šè®¾å¤‡ | åœ¨çº¿å·¥ä¸šè®¾å¤‡ | è„±æœºå·¥ä¸šè®¾å¤‡ | èŠ‚ç‚¹ |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| Windows | âœ… | âœ… | âœ… | ğŸš§ | ğŸš§ | ğŸš§ | 2020 å¹´ 10 æœˆ |
| Android | âŒ | âŒ | âŒ | ğŸš§ | ğŸš§ | ğŸš§ | 2020 å¹´ 11 æœˆ |
| Embed Linux | âŒ | âŒ | âŒ | ğŸš§ | ğŸš§ | ğŸš§ | 2020 å¹´ 12 æœˆ |

## 3. æ¡†æ¶å›¾

```json
@startuml
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/release/1-0/C4_Component.puml

System(TencentCloud, "TencentCloud")
System(BaiduCloud, "BaiduCloud")
System(Magician, "Magician")
System(M1, "M1")
System(MagicBox, "MagicBox")
System(MagicianLite, "MagicianLite")
System(AIStarter, "AIStarter")
System(Arduino, "Arduino")
System(MobilePlatform, "MobilePlatform")
System(Microbit, "Microbit")
System(MagicianGo, "MagicianGo")
System(MagicianPro, "MagicianPro")
System(M1Pro, "M1Pro")
System(CR, "CR")

Lay_D(Magician, M1)
Lay_D(M1, MagicBox)
Lay_D(MagicBox, M1)
Lay_D(MagicBox, MagicianLite)
Lay_D(MagicianLite, AIStarter)
Lay_D(AIStarter, Arduino)
Lay_D(Arduino, MobilePlatform)
Lay_D(MobilePlatform, Microbit)

System_Boundary(DobotLink_SYS, "DobotLink System") {
    System(ArduinoSDK, "ArduinoSDK")

    Container_Boundary(DobotLink, "DobotLink") {
        Boundary(EduDevicePlugin, "æ•™è‚² Device Plugin") {
            Boundary(MagicianPlugin, "Magician Plugin(å¼ƒç”¨)", "Component") {
                Component(DobotDll, "DobotDll", "C++ Qt", "Magiciané€šè®¯æ¨¡å—")
            }
            Boundary(M1Plugin, "M1 Plugin(å¼ƒç”¨)", "Component") {
                Component(DobotM1Dll, "DobotM1Dll", "C++ Qt", "M1é€šè®¯æ¨¡å—")
            }
            Boundary(MagicDevicePlugin, "Magic Devic Plugin", "Component") {
                Boundary(MagicDeviceDll, "Magic Devic Dll", "Component") {
                    Component(MagicianProtocol, "Magician åè®®", "C++ Qt", "åè®®æ ˆæ¡†æ¶")
                    Component(Procotol3Framwork, "Procotol3Framwork", "C++", "åè®®æ ˆæ¡†æ¶")

                    Lay_D(MagicianProtocol, Procotol3Framwork)
                }
            }
            Component(ArduinoPlugin, "Arduino Plugin", "C++ Qt", "Arduinoæ’ä»¶")
            Component(MicrobitPlugin, "Microbit Plugin", "C++ Qt", "Microbitæ’ä»¶")
            Component(Procotol3Plugin, "Procotol3 Plugin(å¼ƒç”¨)", "C++ Qt", "Procotol3åè®®æ’ä»¶")

            Lay_D(Procotol3Framwork, MagicianPlugin)
            Lay_D(MagicianPlugin, M1Plugin)
            Lay_D(M1Plugin, ArduinoPlugin)
            Lay_D(ArduinoPlugin, MicrobitPlugin)
            Lay_D(MicrobitPlugin, Procotol3Plugin)

            Rel_R(MagicianProtocol, Magician, "é€šè®¯", "Serial UDP")
            Rel_R(MagicianProtocol, M1, "é€šè®¯", "Serial UDP")
            Rel_R(MagicianProtocol, MagicBox, "é€šè®¯", "Serial BLE")
            Rel_R(MagicBox, MagicianLite, "é€šè®¯")
            Rel_R(MagicBox, MagicianGo, "é€šè®¯")

            Rel_R(ArduinoPlugin, ArduinoSDK, "IPC")
            Rel_R(ArduinoSDK, AIStarter, "ä¸‹è½½")
            Rel_R(ArduinoSDK, Arduino, "ä¸‹è½½")
            Rel_R(ArduinoSDK, MobilePlatform, "ä¸‹è½½")

            Rel_R(MicrobitPlugin, Microbit, "é€šè®¯")
            Lay_L(MicrobitPlugin, Microbit)

            Rel_R(Procotol3Framwork, MagicBox, "é€šè®¯", "Serial BLE")
        }

        Boundary(IncDevicePlugin, "å·¥ä¸š Device Plugin") {
            Component(IndustrialRobotPlugin, "Industrial Robot Plugin", "C++ Qt", "IndustrialRobotæ’ä»¶")
            Component(LibCurl, "LibCurl", "C++", "é«˜æ€§èƒ½ç½‘ç»œé€šè®¯åº“")

            Lay_D(Procotol3Plugin, IndustrialRobotPlugin)
            Rel_R(IndustrialRobotPlugin, LibCurl, "ä¾èµ–")

            Rel_R(LibCurl, MagicianPro, "é€šè®¯", "HTTP")
            Rel_R(LibCurl, M1Pro, "é€šè®¯", "HTTP")
            Rel_R(LibCurl, CR, "é€šè®¯", "HTTP")
        }

        Boundary(FuncPlugin, "Function Plugin") {
            Component(PythonDebuggerPlugin, "Python Debug Plugin", "C++ Qt", "Pythonè°ƒè¯•æ’ä»¶")
            Boundary(LuaDebuggerPlugin, "Lua Debug Plugin", "Component") {
                Component(LuaInterpreter, "LuaInterpreter", "C", "Lua è§£æå™¨")
            }
            Component(AIPlugin, "AI Plugin", "C++ Qt", "AI")
            Component(DynamicPlugin, "Dynamic Plugin", "C++ Qt", "Dynamicç®—æ³•æ’ä»¶")
            Component(DownloadPlugin, "Download Plugin", "C++ Qt", "å›ºä»¶ä¸‹è½½æ’ä»¶")
        }

        Lay_D(PythonDebuggerPlugin, AIPlugin)
        Lay_D(AIPlugin, DynamicPlugin)
        Lay_D(DynamicPlugin, LuaDebuggerPlugin)
        Lay_D(LuaDebuggerPlugin, DownloadPlugin)
    }

    Component(DobotRPC, "DobotRPC", "Python websocket", "RPCæ¨¡å—")

    Container_Boundary(Debugger, "Debugger") {
        Component(DobotEDU, "DobotEDU", "Python OpenCV", "æ•™è‚²å¼€å‘SDK")
    }
    Container(AI, "PyImageOM", "Python OpenCV sk-learn", "å›¾åƒè¯†åˆ«åº”ç”¨")
    Container(Dynamic, "DynamicAlgorithmRPC", "Python PDB", "åŠ¨æ€å‚æ•°è®¡ç®—åº”ç”¨")
    Container(Mcuisp, "Mcuisp", "Qt qml C++", "Magicianå›ºä»¶ä¸‹è½½åº”ç”¨")
    Container(DFU, "DFU", "C++", "MagicBox MagicianLiteå›ºä»¶ä¸‹è½½åº”ç”¨")

    Lay_R(DobotEDU, DobotRPC)
    Lay_L(PythonDebuggerPlugin, Debugger)
    Lay_R(DobotRPC, AI)
    Lay_D(DobotEDU, Dynamic)
    Lay_D(Dynamic, Mcuisp)
    Lay_D(Mcuisp, DFU)

    Rel_L(AI, DobotRPC, "ä¾èµ–")
    Rel_L(Dynamic, DobotRPC, "ä¾èµ–")

    Rel_R(PythonDebuggerPlugin, Debugger, "é€šè®¯", "IPC")
    Rel_R(AIPlugin, AI, "é€šè®¯", "IPC")
    Rel_R(DynamicPlugin, Dynamic, "é€šè®¯", "IPC")
    Rel_R(DownloadPlugin, Mcuisp, "é€šè®¯", "IPC")
    Rel_R(DownloadPlugin, DFU, "é€šè®¯", "IPC")

    Rel_U(DobotEDU, TencentCloud, "é€šè®¯", "HTTP")
    Rel_U(DobotEDU, BaiduCloud, "é€šè®¯", "HTTP")
    Rel_L(DobotEDU, DobotRPC, "ä¾èµ–")
}

@enduml
```

## 4. å·¥ä¸šæ’ä»¶ç±»å›¾

```json
@startuml
interface DPluginInterface {
}
class IndustrialRobotPlugin {
    - m_requestPacketMap: QMap<quint64, DRequestPacket>
    - m_device: Device
}
class Module {
    - QString m_ip;
    - CurlNetworkManager *m_crulManager;
}
class FileControll {
    - QString m_ip;
    - QThreadPool m_pool;
}
class Device {
    - RobotStatus m_status;
    - Module *m_module;
    - FileControll *m_fileControll;
    - quint16 m_wsPort;
    - bool m_isConnectedQMap<QString, QString> m_selfExchangeFunMap;
    - QMap<QString, APIFunction> m_FuncMap;
    - QMap<quint64, QJsonObject> m_requestMap;
    - QMap<quint64, QEventLoop*> m_eventloopMap;
}

FileControll *--> QThreadPool: 1..1
FileControll ..> Thread: 1..n
Module o--> CurlNetworkManager
Device o-u-> RobotStatus
Device *-u-> Module
Device *-u-> Mobdebug
Device *-u-> FileControll: 1..1
IndustrialRobotPlugin .u.|> DPluginInterface
IndustrialRobotPlugin o-u-> Device
@enduml
```

